from Costs import Costs
from Grid import Grid
from Parameters import Parameters
from ResultsAnalyzer import ResultsAnalyzer
from Simulation import Simulation


def main():
    # Define parameters
    parameters = Parameters(beta1=0.2, beta2=0.1, gamma=0.3, epsilon1=0.01, epsilon2=0.1)

    # Initialize costs
    costs = Costs(c_A=1, c_S=1, c_I=1, c_R=1, c_SI=0, c_SA=0, c_AS=0, c_AI=0, c_IR=0)

    # Create a Grid instance
    grid = Grid(size=30, parameters=parameters, costs=costs)

    # Create a Simulation instance
    simulation = Simulation(grid, num_runs=90, num_time_steps=800)

    # Run the simulation and collect results
    infected_percentages, vulnerable_percentages = simulation.run_simulation()

    # Create a ResultsAnalyzer instance
    analyzer = ResultsAnalyzer(infected_percentages, vulnerable_percentages)

    # Calculate and print average percentages
    avg_infected, avg_vulnerable = analyzer.average_percentages()
    print("Average Infected Percentages:", avg_infected)
    print("Average Vulnerable Percentages:", avg_vulnerable)


if __name__ == "__main__":
    main()
